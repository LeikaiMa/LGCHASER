package atoi;

public class AToI {
	public static int atoi(String str) {
		if (str == null) {
			return 0;
		}
		str = str.trim();
		if (str.isEmpty()) {
			return 0;
		}
		boolean positive = false;
		boolean overflow = false;
		int pos = 0;
		int result = 0;
		int factor = 10;
		if (str.charAt(pos) == '+') {
			positive = true;
		} else if (str.charAt(pos) == '-') {
			positive = false;
		} else if (str.charAt(pos) >= '0' && str.charAt(pos) <= '9') {
			positive = true;
			result = str.charAt(pos) - '0';
		} else {
			return 0;
		}
		pos++;
		while (pos + 1 < str.length() && str.charAt(pos) >= '0'
				&& str.charAt(pos) <= '9') {
			result = result * factor + (str.charAt(pos) - '0');
			if (overflow) {
				if (positive) {
					return Integer.MAX_VALUE;
				} else {
					return Integer.MIN_VALUE;
				}
			}
			if ((result * 10 + (str.charAt(pos + 1) -'0')) / 10 != result) {
				overflow = true;
			}
			pos++;
		}

		if (str.charAt(pos) >= '0' && str.charAt(pos) <= '9') {
			if ((result * 10 + (str.charAt(pos + 1) -'0')) / 10 != result) {
				overflow = true;
			}
			result = result * factor + (str.charAt(pos) - '0');
			if (overflow) {
				if (positive) {
					return Integer.MAX_VALUE;
				} else {
					return Integer.MIN_VALUE;
				}
			}
		}
		if (positive) {
			return result;
		} else {
			return -result;
		}
	}

	public static void main(String[] args) {
		System.out.println(Integer.MAX_VALUE);
		System.out.println(Integer.MIN_VALUE);
		// String s1 = "    -00134";
		// System.out.println(atoi(s1) == -134);
		// String s2 = "    10522545459";
		// System.out.println(atoi(s2) == Integer.MAX_VALUE);
		// String s3 = "    -10522545459";
		// System.out.println(atoi(s3) == Integer.MIN_VALUE);
		String s4 = "2147483648";
		System.out.println(atoi(s4) == Integer.MAX_VALUE);
	}
}
