package anagrams;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

public class NDimensionArray {
	public ArrayList<String> anagrams(String[] strs) {
		ArrayList<String> results = new ArrayList<String>();
		if (strs == null || strs.length == 0 || strs.length == 1) {
			return results;
		}
		
		HashMap<Integer, ArrayList<Integer>> groups = new HashMap<Integer, ArrayList<Integer>>();
		
		
		for (int i = 0; i < strs.length; i++) {
			int len = strs[0].length();
			if (groups.containsKey(len)) {
				groups.get(len).add(i);
			}
		}
		int[][] sum = new int[strs.length][26];
		boolean[] anagrams = new boolean[strs.length];
		for (int i = 0; i < strs.length; i++) {
			for (int j = 0; j < strs[i].length(); j++) {
				sum[i][strs[i].charAt(j) - 'a']++;
			}
			for (int j = i - 1; j >= 0; j--) {
				if (Arrays.equals(sum[i], sum[j])) {
					anagrams[i] = true;
					anagrams[j] = true;
				}
			}
		}

		for (int i = 0; i < strs.length; i++) {
			if (anagrams[i]) {
				results.add(strs[i]);
			}
		}
		return results;
	}

}
