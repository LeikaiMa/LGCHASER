package scrambleString;

public class QuickerDP {
	public static boolean isScramble(String s1, String s2) {
		int len = s1.length();
		if (len != s2.length()) {
			return false;
		}
		if (len == 0) {
			return true;
		}

		char[] c1 = s1.toCharArray();
		char[] c2 = s2.toCharArray();

		boolean[][][] result = new boolean[len + 1][len][len];

		for (int i = 0; i < len; i++) {
			for (int j = 0; j < len; j++) {
				result[1][i][j] = (c1[i] == c2[j]);
			}
		}

		for (int k = 2; k <= len; k++) {
			for (int i = len - k; i >= 0; i--) {
				for (int j = len - k; j >= 0; j--) {
					for (int m = 1; m < k; m++) {
						if (result[m][i][j] && result[k - m][i + m][j + m]
								|| result[m][i][j + k - m]
								&& result[k - m][i + m][j]) {
							result[k][i][j] = true;
							break;
						}
					}
				}
			}
		}
		return result[len][0][0];
	}

	public static void main(String[] args) {
		// String s1 = "abcd";
		// String s2 = "bdac";
		 String s1= "abcdd";
		 String s2= "dbdac";
		System.out.println(isScramble(s1, s2) == false);
		s1 = "ab";
		s2 = "ba";
		System.out.println(isScramble(s1, s2) == true);
		s1 = "ymjmfxshglxwrrgufcvvzjuietjzzz";
		s2 = "fxczujvmwizrzgxgjmvzelyjthusrf";
		System.out.println(isScramble(s1, s2));
	}
}
