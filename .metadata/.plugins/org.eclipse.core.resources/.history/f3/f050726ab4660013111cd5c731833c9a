package wildcardMatching;


public class ReconsiderStar {
	public static boolean isMatch(String s, String p) {
		int indexS = 0;
		int indexP = 0;
		int starS = -1;
		int starP = -1;
		if (s == null || p == null) {
			return false;
		}
		if (p.isEmpty() && s.isEmpty()) {
			return true;
		} else if (p.isEmpty() && !s.isEmpty()) {
			return false;
		}
		
		if (p.replace("*", "").length() > s.length()) {
			return false;
		}
 		while (indexS < s.length() && indexP < p.length()) {
 			char cs = s.charAt(indexS);
 			char cp = p.charAt(indexP);
			if (cs == cp || cp == '?') {
				indexP++;
				indexS++;
			} else if (cp == '*') {
				while (indexP < p.length() && p.charAt(indexP) == '*') {
					indexP ++;
				}
				
				starP = indexP;
				starS = indexS;
				indexP++;
			} else if (cs != cp && cp != '?' && starP > -1) {
				indexP = starP;
				indexS = starS + 1;
			}else {
				return false;
			}
			
		}
 		
 		if (indexS != s.length()) {
 			if (p.charAt(indexP - 1) != '*') {
 				return false;
 			} else {
 				return true;
 			}
 		} else {
 			while (indexP < p.length()) {
 				if (p.charAt(indexP) != '*') {
 					return false;
 				}
 				indexP++;
 					
 			}
 			return true;
 		}
	}

	public static void main(String[] args) {
		System.out.println(isMatch("aa", "*a") == true);
		System.out.println(isMatch("c", "*?*") == true);
		System.out.println(isMatch("hi", "*?") == true);
		System.out.println(isMatch("", "") == true);
		System.out.println(isMatch("a", "a*") == true);
		System.out.println(isMatch("aa", "a") == false);
		System.out.println(isMatch("aa", "aa") == true);
		System.out.println(isMatch("aaa", "aa") == false);
		System.out.println(isMatch("aa", "*") == true);
		System.out.println(isMatch("aa", "a*") == true);

		System.out.println(isMatch("ab", "?*") == true);
		System.out.println(isMatch("aab", "c*a*b") == false);
	}
}
