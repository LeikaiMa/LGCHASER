package wordLadderII;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;

public class BackTrack {
	public ArrayList<ArrayList<String>> findLadders(String start, String end,
			HashSet<String> dict) {
		ArrayList<ArrayList<String>> ladders = new ArrayList<ArrayList<String>>();
		HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();

		HashSet<String> visited = new HashSet<String>();
		HashSet<String> levelElements = new HashSet<String>();
		levelElements.add(start);

		while (!levelElements.isEmpty()) {
			HashSet<String> levelVisited = new HashSet<String>();
			HashSet<String> tmpLevelElements = new HashSet<String>();
			for (String s : levelElements) {
				for (String next : getNext(s)) {
					if (next.equals(end)
							|| (dict.contains(next) && !visited.contains(next))) {
						tmpLevelElements.add(next);
						levelVisited.add(next);
						if (map.containsKey(next)) {
							map.get(next).add(s);
						} else {
							ArrayList<String> parent = new ArrayList<String>();
							parent.add(s);
							map.put(next, parent);
						}
					}
				}
			}
			visited.addAll(levelVisited);
			levelElements = tmpLevelElements;
			if (map.containsKey(end)) {
				ladders = getBackTrack(map, end, start);
				return ladders;
			}
		}
		return ladders;
	}
}
